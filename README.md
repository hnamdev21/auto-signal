# RSI Divergence Bot - Smart Trading Signal System

A real-time cryptocurrency RSI divergence detection bot that sends notifications via Telegram only when divergence signals are detected (monitoring every minute UTC).

## Features

- ğŸ“Š Real-time price monitoring from Binance API
- ğŸ“ˆ RSI (Relative Strength Index) calculation with standard 14-period
- ğŸ¯ **RSI Divergence Detection** - Identifies bullish/bearish divergences
- ğŸ” Pivot point detection for accurate signal generation
- ğŸ’° Automatic Take Profit & Stop Loss calculations
- â° Precise UTC minute-based scheduling
- ğŸ“± **Smart Alerts** - Only sends notifications for divergence signals
- ğŸ›¡ï¸ Error handling and health checks
- ğŸ”§ Configurable symbols, RSI periods, and divergence parameters
- ğŸ“Š Continuous monitoring with selective alerting

## Setup

### 1. Environment Variables

Create a `.env` file in the project root with the following variables:

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Trading Configuration
SYMBOL=BTCUSDT
RSI_PERIOD=14
INTERVAL=1m

# Divergence Detection Configuration
PIVOT_LENGTH=2
BULL_DIV_DIFF=5.0
BEAR_DIV_DIFF=5.0
BULL_RSI_LEVEL=35.0
BEAR_RSI_LEVEL=65.0
TP_PERCENT=1.0
SL_PERCENT=1.0
```

### 2. Telegram Bot Setup

1. Create a new bot with [@BotFather](https://t.me/botfather)
2. Get your bot token and add it to `TELEGRAM_BOT_TOKEN`
3. Get your chat ID and add it to `TELEGRAM_CHAT_ID`

### 3. Installation

```bash
npm install
```

### 4. Running the Bot

```bash
# Development mode (with auto-restart)
npm run dev

# Production mode
npm start
```

## Configuration

| Variable             | Description                  | Default   |
| -------------------- | ---------------------------- | --------- |
| `TELEGRAM_BOT_TOKEN` | Your Telegram bot token      | Required  |
| `TELEGRAM_CHAT_ID`   | Your Telegram chat ID        | Required  |
| `SYMBOL`             | Trading pair symbol          | `BTCUSDT` |
| `RSI_PERIOD`         | RSI calculation period       | `14`      |
| `INTERVAL`           | Data interval                | `1m`      |
| `PIVOT_LENGTH`       | Pivot detection lookback     | `2`       |
| `BULL_DIV_DIFF`      | Min RSI diff for bullish div | `5.0`     |
| `BEAR_DIV_DIFF`      | Min RSI diff for bearish div | `5.0`     |
| `BULL_RSI_LEVEL`     | RSI oversold level           | `35.0`    |
| `BEAR_RSI_LEVEL`     | RSI overbought level         | `65.0`    |
| `TP_PERCENT`         | Take profit percentage       | `1.0`     |
| `SL_PERCENT`         | Stop loss percentage         | `1.0`     |

## RSI Signals

The bot provides RSI-based signals:

- ğŸ”´ **OVERBOUGHT**: RSI â‰¥ 70
- ğŸŸ¡ **BULLISH**: RSI â‰¥ 60
- âšª **NEUTRAL**: RSI 40-60
- ğŸŸ¡ **BEARISH**: RSI â‰¤ 40
- ğŸŸ¢ **OVERSOLD**: RSI â‰¤ 30

## Alert Formats

### Regular Price Alert

```
ğŸ“Š Trading Signal - BTCUSDT

ğŸ’° Current Price: 45,123.45 USDT
ğŸ“ˆ RSI (1m): 65.23 ğŸŸ¡ BULLISH
ğŸ• Time: 2024-01-15T10:30:00.000Z

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Alert generated by Signals Bot
```

### Divergence Signal Alert

```
ğŸ“Š Trading Signal - BTCUSDT

ğŸ’° Current Price: 45,123.45 USDT
ğŸ“ˆ RSI (1m): 65.23 ğŸŸ¡ BULLISH
ğŸ• Time: 2024-01-15T10:30:00.000Z

ğŸ¯ DIVERGENCE SIGNAL DETECTED!
ğŸŸ¢ BULLISH DIVERGENCE ğŸ”¥ STRONG

ğŸ“Š Entry Price: 44,850.00 USDT
ğŸ“ˆ RSI at Signal: 32.45
ğŸ¯ Take Profit: 45,298.50 USDT
ğŸ›¡ï¸ Stop Loss: 44,401.50 USDT
ğŸ“Š Confidence: 85.2%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ This is not financial advice. Trade at your own risk.
```

## Architecture

```
â”œâ”€â”€ index.ts                 # Main bot entry point
â”œâ”€â”€ types/
â”‚   â””â”€â”€ market.model.ts      # TypeScript interfaces
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ market.service.ts    # Binance API integration
â”‚   â”œâ”€â”€ telegram.service.ts  # Telegram notifications
â”‚   â””â”€â”€ signal.service.ts    # Trading signal generation
â””â”€â”€ utils/
    â”œâ”€â”€ rsi.utils.ts         # RSI calculation logic
    â”œâ”€â”€ pivot.utils.ts       # Pivot point detection
    â”œâ”€â”€ divergence.utils.ts  # Divergence detection algorithm
    â””â”€â”€ scheduler.utils.ts   # UTC scheduling
```

## Divergence Detection

The bot implements the same logic as the Pine Script indicator:

### Bullish Divergence

- **Condition**: Price makes lower low, RSI makes higher low
- **Requirements**:
  - Current price low < previous price low
  - Current RSI low > previous RSI low + bullDivergenceDiff
  - Current RSI low â‰¤ bullRsiLevel (35.0)

### Bearish Divergence

- **Condition**: Price makes higher high, RSI makes lower high
- **Requirements**:
  - Current price high > previous price high
  - Current RSI high < previous RSI high - bearDivergenceDiff
  - Current RSI high â‰¥ bearRsiLevel (65.0)

### Signal Features

- **Confidence Score**: Based on divergence strength
- **Take Profit/Stop Loss**: Automatically calculated
- **Cooldown Period**: 5 minutes between signals
- **Pivot Detection**: Configurable lookback period

## Error Handling

- Automatic retry on API failures
- Telegram error notifications
- Graceful shutdown on SIGINT/SIGTERM
- Health checks for all services

## Requirements

- Node.js 16+
- TypeScript
- Internet connection for API calls
- Valid Telegram bot token and chat ID
